
<!--
K&A FARMS – COMBINED SHOP (LEFT) + CART/ORDERS (RIGHT)
- One self-contained HTML file using your latest prices/images and mail address
- Prices & images match your uploads (Eggs $5, Scrubber $6, Vanilla $5)
- +/- controls disabled until "Add to cart" is pressed
- Cart shows lines, totals, remove; checkout via mailto with Name/Email/Phone/Notes
- Uses localStorage (ka_cart); header badge shows live count + total
-->

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>K&A Farms – Shop & Orders</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="shortcut icon" type="image/x-icon" href="KA_Logo.png">
<style>
:root {--bg:#faf8f6;--ink:#1f2937;--muted:#667085;--brand:#a18c00;--accent:#fffce8}
*{box-sizing:border-box} html,body{margin:0}
[id] {scroll-margin-top:65px}
html {scroll-behavior:smooth}
input[type="search"]:focus {outline:none; border-color:var(--brand); box-shadow: 0 0 0 2px #fffce8;}
body{font-family:Inter,system-ui,sans-serif;background:var(--bg);color:var(--ink)}
header{background:#fff;border-bottom:1px solid #eee;position:sticky;top:0;z-index:10}
.nav{max-width:1100px;margin:0 auto;padding:14px 18px;display:flex;align-items:center;justify-content:space-between;gap:12px}
.links{display:flex;align-items:center;gap:14px}
.links a{color:var(--ink);text-decoration:none;font-weight:600}
.links a:hover{color:var(--brand)}
.cartpill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid #eee;border-radius:999px;background:#fff}
.cartpill b{min-width:2ch;display:inline-block;text-align:right}
.container{max-width:1100px;margin:0 auto;padding:28px 18px}
.h1{font-size:28px;font-weight:700;margin:0 0 10px}
.btn{display:inline-flex;align-items:center;gap:6px;padding:10px 12px;border-radius:12px;border:1px solid #e5e7eb;background:#fff;font-weight:700;cursor:pointer}
.btn.primary{background:var(--brand);color:#fff;border-color:transparent}
.dropdown {position:relative; cursor:pointer;}
.dropdown-content {display:none; position:absolute; background-color:#fff; padding:12px 16px; border: 1px solid #eee; border-radius:10px; width:170px; right:0; justify-content:center;}
.dropdown-content a {display:flex; flex-direction:column; justify-content:center; align-items:center; margin:5px;}
.dropdown:hover .dropdown-content {display:block;}

/* two-column layout */
.layout{display:grid;grid-template-columns:1.6fr .9fr;gap:24px;align-items:start}
@media (max-width:1100px){.layout{grid-template-columns:1fr}}

/* shop cards */
.grid-shop{display:grid;grid-template-rows:repeat(3,minmax(0,1fr));gap:16px}
@media (max-width:980px){.grid-shop{grid-template-rows:1fr 1fr}}
@media (max-width:640px){.grid-shop{grid-template-rows:1fr}}
.card{background:#fff;border:1px solid #eee;border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
.card img{width:100%;height:240px;object-fit:contain}
.pad{padding:14px}
.kicker{font-size:12px;letter-spacing:.12em;text-transform:uppercase;color:var(--muted);font-weight:700}
.price{font-weight:700}
.controls{display:flex;align-items:center;gap:8px}
.step{width:36px;height:36px;display:inline-flex;align-items:center;justify-content:center;border:1px solid #e5e7eb;border-radius:10px;background:#fff;cursor:pointer;font-size:18px}
.step:disabled{opacity:.4;cursor:not-allowed}
.qty{min-width:2ch;text-align:center;font-weight:700}
.notice{padding:12px 14px;border:1px dashed #e5e7eb;border-radius:12px;background:#fff;color:var(--muted)}
.badge{font-size:11px;padding:4px 8px;border-radius:8px;background:#f3f4f6;color:#374151}

/* cart */
.panel{position:sticky; top:74px}
.row{display:grid;grid-template-columns:2fr 1fr 1fr 1fr .5fr;gap:10px;align-items:center; border-right:1px solid #eee}
@media (max-width:520px){.row{grid-template-columns:1.2fr .7fr .7fr 1fr}}
.head{font-size:12px;letter-spacing:.08em;text-transform:uppercase;color:var(--muted)}
.thumb{width:48px;height:48px;border-radius:10px;border:1px solid #eee;object-fit:cover;background:#fff;margin-right:8px}
.money{font-weight:700}
.actions{display:flex;gap:8px;align-items:center}
.totals{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 14px;border:1px solid #eee;border-radius:12px;background:#fff;font-weight:700}
.empty{padding:16px;border:1px dashed #e5e7eb;border-radius:12px;background:#fff;text-align:center}
label{font-weight:700;font-size:14px}
input,textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #e5e7eb;background:#fff}
footer{background:#fff;border-top:1px solid #eee;padding:24px 18px;color:#6b7280}
</style>
</head>
<body>
<header>
<div class="nav">
<div style="display:flex;align-items:center;gap:10px"><strong>K&A Farms</strong></div>
<nav class="links">
<div class="dropdown">Shop
	<div class="dropdown-content">
	<a href="#farmProduct">Farm Products</a>
	<a href="#bakery">Kelsey's Bakery</a>
	</div>
</div>
	<form style="flex:1; max-width:300px; position:relative;">
		<input type="search" placeholder="Search..." style="width:100%; padding:8px 10px 8px 32px; border-radius:12px; border:1px solid #ddd;">
		<svg viewBox="0 0 24 24" width="18" height="18" style="position:absolute; left:10px; top:50%; transform:translateY(-50%); fill:#999;">
			<path d="M12 20l-5.6-5.6A7 7 0 1015 15.4L20.6 21 21 20zM5 10a5 5 0 1110 0 5 5 0 01-10 0z"/>
		</svg>
	</form>
</nav>
</div>
</header>

<main class="container">
  <h1 class="h1">Shop</h1>
  <div class="layout">
    <!-- SHOP LEFT -->
    <section id="shop">
      <p class="notice" id="notice">Add items and adjust quantities here. Your cart is saved automatically.</p>
	  <h3 id="farmProduct">Farm Products</h3>
      <div class="grid-shop" aria-label="Products">
        <!-- Eggs -->
        <article class="card">
          <img src="Eggs.jpg" alt="Farm fresh eggs in a basket">
          <div class="pad">
            <div class="kicker">Farm‑Fresh</div>
            <h2 style="margin:2px 0 6px;font-size:20px">Eggs <span class="badge">Mixed sizes</span></h2>
            <p style="margin:0 0 10px;color:var(--muted)">Dozens include a natural mix of sizes with deep orange yolks. Gathered daily from free‑roaming hens.</p>
            <p class="price">$ <span data-price="eggs">5.00</span> / dozen</p>
            <div class="controls" data-key="eggs">
              <button class="step" aria-label="Decrease" disabled>–</button>
              <span class="qty" aria-live="polite">0</span>
              <button class="step" aria-label="Increase" disabled>+</button>
              <button class="btn" data-add>Add to cart</button>
            </div>
          </div>
        </article>

        <!-- Egg Scrubber -->
        <article class="card">
          <img src="Egg Scrubber.jpg" alt="Chicken‑shaped silicone egg scrubber">
          <div class="pad">
            <div class="kicker">Coop Tool</div>
            <h2 style="margin:2px 0 6px;font-size:20px">Egg Scrubber</h2>
            <p style="margin:0 0 10px;color:var(--muted)">Flexible bristles gently clean fresh eggs without damaging the shell.</p>
            <p class="price">$ <span data-price="scrubber">6.00</span> / each</p>
            <div class="controls" data-key="scrubber">
              <button class="step" aria-label="Decrease" disabled>–</button>
              <span class="qty" aria-live="polite">0</span>
              <button class="step" aria-label="Increase" disabled>+</button>
              <button class="btn" data-add>Add to cart</button>
            </div>
          </div>
        </article>

        <!-- Vanilla Extract -->
        <article class="card">
          <img src="Picture Coming Soon.png" alt="Homemade vanilla extract bottle placeholder">
          <div class="pad">
            <div class="kicker">Small‑Batch</div>
            <h2 style="margin:2px 0 6px;font-size:20px">Vanilla Extract <span class="badge">2 oz</span></h2>
            <p style="margin:0 0 10px;color:var(--muted)">Made with whole vanilla beans and simple ingredients, aged for smooth, fragrant flavor.</p>
            <p class="price">$ <span data-price="vanilla">5.00</span> / bottle</p>
            <div class="controls" data-key="vanilla">
              <button class="step" aria-label="Decrease" disabled>–</button>
              <span class="qty" aria-live="polite">0</span>
              <button class="step" aria-label="Increase" disabled>+</button>
              <button class="btn" data-add>Add to cart</button>
            </div>
          </div>
        </article>
      </div>
	  
	  <h3 id="bakery">Kelsey's Bakery</h3>
      <div class="grid-shop" aria-label="Products">
        <!-- Crinkle Cookies -->
        <article class="card">
          <img src="Crinkle Cookie.jpg" alt="Stacked Crinkle Cookies">
          <div class="pad">
            <div class="kicker">Baked Good</div>
            <h2 style="margin:2px 0 6px;font-size:20px">Crinkle Cookies <span class="badge">24ct</span></h2>
            <p style="margin:0 0 10px;color:var(--muted)">Rich, soft, and perfectly fudgy, our Crinkle Cookies are made from scratch using real cocoa and simple ingredients.</p>
            <p class="price">$ <span data-price="crinkle">10.00</span> / 24ct</p>
            <div class="controls" data-key="crinkle">
              <button class="step" aria-label="Decrease" disabled>–</button>
              <span class="qty" aria-live="polite">0</span>
              <button class="step" aria-label="Increase" disabled>+</button>
              <button class="btn" data-add>Add to cart</button>
            </div>
          </div>
        </article>

        <!-- Crinkle Cookies Batch -->
        <article class="card">
          <img src="Crinkle Cookie.jpg" alt="Stacked Crinkle Cookies">
          <div class="pad">
            <div class="kicker">Baked Good</div>
            <h2 style="margin:2px 0 6px;font-size:20px">Crinkle Cookies <span class="badge">Batch</span></h2>
            <p style="margin:0 0 10px;color:var(--muted)">Roughly 6 dozen Crinkle cookies</p>
            <p class="price">$ <span data-price="crinkleBatch">28.00</span> / batch</p>
            <div class="controls" data-key="crinkleBatch">
              <button class="step" aria-label="Decrease" disabled>–</button>
              <span class="qty" aria-live="polite">0</span>
              <button class="step" aria-label="Increase" disabled>+</button>
              <button class="btn" data-add>Add to cart</button>
            </div>
          </div>
        </article>

        <!-- Ooey Gooey Butter Cake -->
        <article class="card">
          <img src="Ooey Gooey.png" alt="Ooey Gooey Butter Cake">
          <div class="pad">
            <div class="kicker">Baked Good</div>
            <h2 style="margin:2px 0 6px;font-size:20px">Ooey Gooey Butter Cake <span class="badge">9x13 Pan</span></h2>
            <p style="margin:0 0 10px;color:var(--muted)">Soft-centered and golden-edged, these classic Chocolate Chip Cookies are baked fresh with real butter, pure vanilla, and creamy milk chocolate chips.</p>
            <p class="price">$ <span data-price="butterCake">20.00</span> / pan</p>
            <div class="controls" data-key="butterCake">
              <button class="step" aria-label="Decrease" disabled>–</button>
              <span class="qty" aria-live="polite">0</span>
              <button class="step" aria-label="Increase" disabled>+</button>
              <button class="btn" data-add>Add to cart</button>
            </div>
          </div>
        </article>
		<!-- Chocolate Chip Cookies -->
        <article class="card">
          <img src="Chocolate Chip.jpg" alt="Chocolate Chip Cookies">
          <div class="pad">
            <div class="kicker">Baked Good</div>
            <h2 style="margin:2px 0 6px;font-size:20px">Chocolate Chip Cookies<span class="badge">18 ct</span></h2>
            <p style="margin:0 0 10px;color:var(--muted)"></p>
            <p class="price">$ <span data-price="chocChip">12.00</span> / 18 t</p>
            <div class="controls" data-key="chocChip">
              <button class="step" aria-label="Decrease" disabled>–</button>
              <span class="qty" aria-live="polite">0</span>
              <button class="step" aria-label="Increase" disabled>+</button>
              <button class="btn" data-add>Add to cart</button>
            </div>
          </div>
        </article>		  
      </div>
    </section>

    <!-- CART / ORDERS RIGHT -->
    <aside id="orders" class="panel">
      <h2 style="margin:0 0 10px;font-size:20px">Your Cart</h2>
      <div id="cartBox"></div>
      <div class="totals" style="margin-top:12px"><span>Order total</span><span>$ <span id="grand">0.00</span></span></div>

      <div class="card" style="margin-top:12px">
        <div class="pad">
          <h3 style="margin:0 0 10px; font-size:16px">Your Details</h3>
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px">
            <div>
              <label for="oName">Full name</label>
              <input id="oName" placeholder="Jane Doe" required>
            </div>
            <div>
              <label for="oPhone">Phone</label>
              <input id="oPhone" placeholder="(555) 555‑5555" required>
            </div>
          </div>
          <div style="margin-top:12px">
            <label for="oEmail">Email</label>
            <input id="oEmail" type="email" placeholder="you@example.com" required>
          </div>
          <div style="margin-top:12px">
            <label for="oNotes">Notes (optional)</label>
            <textarea id="oNotes" rows="3" placeholder="Preferred pickup time, directions, allergies, etc."></textarea>
          </div>
          <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
            <button id="mailtoBtn" class="btn">Email my order</button>
            <button id="clearBtn" class="btn" title="Clear cart">Clear</button>
          </div>
          <p id="hint" class="notice" style="margin-top:12px; display:none">If your mail app doesn’t open, copy the summary below into an email to <a href="mailto:kafarmsorders@gmail.com">kafarmsorders@gmail.com</a>.</p>
          <pre id="fallback" style="display:none; white-space:pre-wrap; background:#fff; border:1px solid #eee; border-radius:12px; padding:12px; font-family:sans-serif; font-size:13px"></pre>
        </div>
      </div>
    </aside>
  </div>
</main>

<footer>
  <div class="container" style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap">
    <span><span id="year"></span> K&A Farms</span>
    <span class="muted">Private link — please don’t share publicly</span>
  </div>
</footer>

<script>
document.querySelector('form').addEventListener('submit', (e) => {
  e.preventDefault();
  alert('Search coming soon!');
});
// === STORAGE ===
const STORAGE_KEY = 'ka_cart';
const TO_EMAIL = 'kafarmsorders@gmail.com';
function loadCart(){ try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {}; } catch{ return {}; } }
function saveCart(c){ localStorage.setItem(STORAGE_KEY, JSON.stringify(c)); }
function itemsCount(c){ return Object.values(c).reduce((a,b)=>a+(b||0),0); }
function currency(n){ return (Math.round(n*100)/100).toFixed(2); }

// Prices read from DOM so editing numbers updates logic too
// ---Add to thes to add more items
const PRICES = {
	eggs: parseFloat(document.querySelector('[data-price="eggs"]').textContent),
	scrubber: parseFloat(document.querySelector('[data-price="scrubber"]').textContent),
	vanilla: parseFloat(document.querySelector('[data-price="vanilla"]').textContent),
	crinkle: parseFloat(document.querySelector('[data-price="crinkle"]').textContent),
	crinkleBatch: parseFloat(document.querySelector('[data-price="crinkleBatch"]').textContent),
	butterCake: parseFloat(document.querySelector('[data-price="butterCake"]').textContent),
	chocChip: parseFloat(document.querySelector('[data-price="chocChip"]').textContent)	
};
const TITLES = {
	eggs: 'Farm‑Fresh Eggs (dozen)',
	scrubber: 'Egg Scrubber',
	vanilla: 'Vanilla Extract (2 oz)',
	crinkle: 'Crinkle Cookies (24 ct)',
	crinkleBatch: 'Crinkle Cookies (Batch)',
	butterCake: 'Butter Cake',
	chocChip: 'Chocolate Chip (18 ct)'
};
	const THUMBS = {
	eggs: 'Eggs.jpg',
	scrubber: 'Egg Scrubber.jpg',
	vanilla: 'Picture Coming Soon.png',
	crinkle: 'Crinkle Cookie.jpg',
	crinkleBatch: 'Crinkle Cookie.jpg',
	butterCake: 'Ooey Gooey.png',
	chocChip: 'Chocolate Chip.jpg'
};

const cart = loadCart();

function headerTotal(){ return Object.entries(cart).reduce((s,[k,q])=> s + (PRICES[k]||0)*(q||0), 0); }
function updateBadge(){
  document.getElementById('cartCount').textContent = itemsCount(cart);
  document.getElementById('cartTotal').textContent = currency(headerTotal());
}

// SHOP stepper logic (disable +/- until added)
for(const row of document.querySelectorAll('.controls')){
  const key = row.dataset.key;
  const qtyEl = row.querySelector('.qty');
  const minusBtn = row.querySelectorAll('.step')[0];
  const plusBtn = row.querySelectorAll('.step')[1];
  const addBtn = row.querySelector('[data-add]');
  const disable=()=>{ minusBtn.disabled=true; plusBtn.disabled=true; }
  const enable =()=>{ minusBtn.disabled=false; plusBtn.disabled=false; };

  if(cart[key]>0){ enable(); qtyEl.textContent=cart[key]; } else { disable(); qtyEl.textContent=0; }

  minusBtn.addEventListener('click',()=>{ if(cart[key]>0){ cart[key]--; qtyEl.textContent=cart[key]; if(cart[key]===0) disable(); saveCart(cart); renderCart(); updateBadge(); }});
  plusBtn.addEventListener('click',()=>{ cart[key]=(cart[key]||0)+1; qtyEl.textContent=cart[key]; saveCart(cart); renderCart(); updateBadge(); });
  addBtn.addEventListener('click',()=>{ cart[key]=(cart[key]||0)+1; qtyEl.textContent=cart[key]; enable(); saveCart(cart); renderCart(); updateBadge(); });
}

function total(){ return Object.entries(cart).reduce((s,[k,q])=> s + (PRICES[k]||0)*(q||0), 0); }
function renderCart(){
  const box = document.getElementById('cartBox');
  box.innerHTML='';
  if(itemsCount(cart)===0){ box.innerHTML='<div class="empty">Your cart is empty.</div>'; document.getElementById('grand').textContent='0.00'; return; }
  const head=document.createElement('div'); head.className='row head pad'; head.innerHTML='<div>Item</div><div>Price</div><div>Qty</div><div>Line</div><div></div>'; box.appendChild(head);
  Object.keys(cart).forEach(key=>{
    const qty=cart[key]||0; if(!qty) return;
    const row=document.createElement('div'); row.className='row pad';
    row.innerHTML=`
      <div style="display:flex;align-items:center; border-right:1px solid #eee"><img class="thumb" src="${THUMBS[key]||''}" alt="${TITLES[key]}"><div>${TITLES[key]}</div></div>
      <div>$${currency(PRICES[key]||0)}</div>
      <div class="actions" data-key="${key}">
        <button class="step" aria-label="Decrease">–</button>
        <strong class="qty">${qty}</strong>
        <button class="step" aria-label="Increase">+</button>
      </div>
      <div class="money">$<span class="lineTotal">${currency((PRICES[key]||0)*qty)}</span></div>
      <div class="actions"><button class="btn" data-remove>Remove</button></div>`;
    box.appendChild(row);
  });

  // wire +/- and remove inside cart
  box.querySelectorAll('.actions').forEach(group=>{
    const key=group.dataset.key; if(!key) return;
    const dec=group.querySelectorAll('.step')[0];
    const inc=group.querySelectorAll('.step')[1];
    const qtyEl=group.querySelector('.qty');
    const lineEl=group.parentElement.querySelector('.lineTotal');

    dec.addEventListener('click',()=>{
      cart[key]=Math.max(0,(cart[key]||0)-1);
      qtyEl.textContent=cart[key]||0; lineEl.textContent=currency((PRICES[key]||0)*(cart[key]||0));
      const shopRow=document.querySelector(`.controls[data-key="${key}"]`);
      if(shopRow){ shopRow.querySelector('.qty').textContent=cart[key]||0; if(cart[key]===0){ shopRow.querySelectorAll('.step').forEach(b=>b.disabled=true); } }
      if(cart[key]===0){ delete cart[key]; group.parentElement.remove(); }
      finalize();
    });
    inc.addEventListener('click',()=>{
      cart[key]=(cart[key]||0)+1; qtyEl.textContent=cart[key]; lineEl.textContent=currency((PRICES[key]||0)*cart[key]);
      const shopRow=document.querySelector(`.controls[data-key="${key}"]`);
      if(shopRow){ shopRow.querySelector('.qty').textContent=cart[key]; shopRow.querySelectorAll('.step').forEach(b=>b.disabled=false); }
      finalize();
    });
  });

  box.querySelectorAll('[data-remove]').forEach(btn=>{
    btn.addEventListener('click',()=>{
      const row=btn.closest('.row'); const key=row.querySelector('.actions').dataset.key;
      delete cart[key]; row.remove();
      const shopRow=document.querySelector(`.controls[data-key="${key}"]`);
      if(shopRow){ shopRow.querySelector('.qty').textContent='0'; shopRow.querySelectorAll('.step').forEach(b=>b.disabled=true); }
      finalize();
    });
  });

  finalize();
}

function finalize(){
  Object.keys(cart).forEach(k=>{ if(!cart[k]) delete cart[k]; });
  saveCart(cart);
  const g=total();
  document.getElementById('grand').textContent=currency(g);
  updateBadge();
}

function summaryLines(){
  return Object.entries(cart)
    .filter(([,q])=>q>0)
    .map(([k,q])=>`• ${q}| ${TITLES[k]} | $${(PRICES[k]||0).toFixed(2)}`)
    .join('\n');
}

function buildMailto(){
  const name=document.getElementById('oName').value.trim();
  const email=document.getElementById('oEmail').value.trim();
  const phone=document.getElementById('oPhone').value.trim();
  const notes=document.getElementById('oNotes').value.trim();
  if(!name||!email||!phone){ alert('Please fill in your name, email, and phone.'); return null; }
  const id='KA-'+Date.now().toString().slice(-8).toUpperCase();
  const totalStr=document.getElementById('grand').textContent;
  const subject=encodeURIComponent(`K&A Farms Order ${id}`);
  const bodyRaw=`Order #: ${id}\nName: ${name}\nEmail: ${email}\nPhone: ${phone}\n\nItems:\n${summaryLines()}\n\nTotal: $${totalStr}\n\nNotes: ${notes||'—'}\n`;
  return `mailto:${TO_EMAIL}?subject=${subject}&body=${encodeURIComponent(bodyRaw)}`;
}

// Buttons
const mailBtn=document.getElementById('mailtoBtn');
mailBtn.addEventListener('click',()=>{
  if(itemsCount(cart)===0){ alert('Your cart is empty.'); return; }
  const href=buildMailto(); if(!href) return;
  const hint=document.getElementById('hint'); const fallback=document.getElementById('fallback');
  const decoded=decodeURIComponent(href.split('body=')[1]||'');
  fallback.textContent=decoded; hint.style.display='block'; fallback.style.display='block';
  window.location.href=href;
});

document.getElementById('clearBtn').addEventListener('click',()=>{
  localStorage.removeItem(STORAGE_KEY); Object.keys(cart).forEach(k=>delete cart[k]);
  // reset steppers
  document.querySelectorAll('.controls').forEach(r=>{ r.querySelector('.qty').textContent='0'; r.querySelectorAll('.step').forEach(b=>b.disabled=true); });
  renderCart(); updateBadge();
});

// Init
renderCart(); updateBadge();
document.getElementById('year').textContent=new Date().getFullYear();
</script>
</body>
</html>
