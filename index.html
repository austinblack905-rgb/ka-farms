<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>K&A Farms</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="shortcut icon" type="image/x-icon" href="https://www.ka-farms.com/assets/ka-apple-touch.png">
  <link rel="apple-touch-icon" href="https://www.ka-farms.com/assets/ka-apple-logo.png">
  <style>
    :root {--bg:#faf8f6;--ink:#1f2937;--muted:#667085;--brand:#a18c00;--accent:#fffce8;}
    *{box-sizing:border-box} html,body{margin:0;padding:0}
    body{font-family:Inter,system-ui,sans-serif;background:var(--bg);color:var(--ink);line-height:1.6;}
    header{background:#fff;border-bottom:1px solid #eee;position:sticky;top:0;z-index:10;}
    .nav{max-width:1000px;margin:0 auto;padding:16px 20px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .links{display:flex;align-items:center;gap:14px}
    .links a{color:var(--ink);text-decoration:none;font-weight:600}
    .links a:hover{color:var(--brand)}
    .cartpill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid #eee;border-radius:999px;background:#fff}
    .cartpill b{min-width:2ch;display:inline-block;text-align:right}
    .hero{background:linear-gradient(180deg,#be0101 0%,transparent 100%);padding:80px 20px;text-align:center;}
    .hero h1{font-size:48px;margin:0 0 12px;}
    .hero p{max-width:700px;margin:0 auto 20px;color:var(--muted);font-size:18px;}
    .btn{background:var(--brand);color:#fff;padding:12px 22px;border:none;border-radius:10px;font-weight:600;cursor:pointer;text-decoration:none;}
    .btn:hover{opacity:.95}
    main{max-width:900px;margin:auto;padding:40px 20px;}
    section{margin-bottom:40px;}
    h2{margin-top:0;color:var(--brand);}
    footer{background:#fff;border-top:1px solid #eee;padding:24px 20px;text-align:center;color:var(--muted);}
    img.hero-img{width:100%;max-width:800px;border-radius:16px;margin:30px auto;display:block;}
  </style>
</head>
<body>
  <header>
    <div class="nav">
      <h1 style="font-size:22px;margin:0;">K&A Farms</h1>
    </div>
  </header>

  <section class="hero">
    <img src="https://www.ka-farms.com/assets/KA_logo_xmas_white.png" alt="K&A Farms banner image" class="hero-img">
    <p style="color:white">Our family homestead offers <strong>farm-fresh eggs</strong> with deep orange yolks, <strong>homemade vanilla extract</strong>, and small-batch seasonal goods made with care. We keep things simple, local, and full of heart.</p>
    <a id="btn" class="btn" href="https:\\www.ka-farms.com\Shop">Visit the Shop</a>
  </section>

  <main>
    <section>
      <h2>Our Story</h2>
      <p>What started as a backyard hobby quickly grew into something more. We found joy in sharing the things we made and gathered — fresh eggs, homemade vanilla, and a few creative touches from our kitchen. Each product is created with the same care we’d give our own family.</p>
      <p>Our hens roam freely, enjoying sunshine and natural forage, producing eggs that truly taste like home. We believe in honest work, fresh ingredients, and keeping our process simple and transparent.</p>
    </section>

    <section>
      <h2>What We Offer</h2>
      <ul>
        <li><strong>Farm-Fresh Eggs:</strong> Mixed sizes and colors, vibrant orange yolks, and gathered daily.</li>
        <li><strong>Homemade Vanilla Extract:</strong> Small-batch, 2oz bottles made from real vanilla beans.</li>
        <li><strong>Egg Scrubbers:</strong> Chicken-shaped silicone tools perfect for cleaning fresh eggs.</li>
        <li><strong>Baked Goods:</strong> Delicious sweets that may change with the seasons!</li>
      </ul>
      <p>Our products are limited and available through private order only, ensuring freshness and attention to detail in every batch.</p>
    </section>

    <section>
      <h2>Contact Us</h2>
      <p>Have a question or want to place a special order? Reach out anytime!</p>
      <p><strong>Email:</strong> <a href="mailto:kafarmsorders@gmail.com">kafarmsorders@gmail.com</a></p>
      <p><strong>Austin's Phone:</strong> (813) 573-3764</p>
      <p><strong>Kelsey's Phone:</strong> (813) 454-3871</p>
      <p style="color:var(--muted);font-size:14px;">Return & Refund Policy: Because our goods are handmade and perishable, all sales are final. If something isn’t right, we’ll make it right — just let us know.</p>
    </section>
  </main>

  <footer>
    <p><span id="year"></span> K&A Farms — Merry Christmas! And a Happy New Year!</p>
  </footer>

  <script>
    // Cart tracker for header (shared with shop/cart pages)
    const STORAGE_KEY = 'ka_cart';
    function loadCart(){ try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {}; } catch{ return {}; } }
    function countItems(cart){ return Object.values(cart).reduce((a,b)=>a+(b||0),0); }
    function currency(n){ return (Math.round((n||0)*100)/100).toFixed(2); }

    // If prices are needed for total, read from cart.html later; for now persist a cached total if present
    function computeTotal(cart){
      // We cache a running total under ka_cart_total from the shop/cart pages; fall back to 0.00
      const cached = localStorage.getItem('ka_cart_total');
      if(cached) return parseFloat(cached);
      return 0;
    }

    function updateBadge(){
      const cart = loadCart();
      const items = countItems(cart);
      const total = computeTotal(cart);
      const countEl = document.getElementById('cartCount');
      const totalEl = document.getElementById('cartTotal');
      if(countEl) countEl.textContent = items;
      if(totalEl) totalEl.textContent = currency(total);
    }

    // Initial + on storage changes
    updateBadge();
    window.addEventListener('storage', (e)=>{ if(e.key === STORAGE_KEY || e.key === 'ka_cart_total') updateBadge(); });

    // Footer year
      document.getElementById('year').textContent = new Date().getFullYear();
      (function () {
          // ✅ Set your window (YYYY-MM-DD). END is inclusive.
          const START = "2025-12-01";
          const END = "2026-01-05";

          function inWindowLocal(startYmd, endYmd) {
              const now = new Date();
              const start = new Date(startYmd + "T00:00:00");
              const end = new Date(endYmd + "T23:59:59");
              return now >= start && now <= end;
          }

          function applySnowcap(enabled) {
              const btn = document.getElementById("btn");
              if (!btn) return;
              btn.classList.toggle("snowcap", enabled);
          }

          let snow = null;

          function startSnowfall() {
              if (snow) return; // already running

              // --- Canvas setup ---
              const canvas = document.createElement("canvas");
              const ctx = canvas.getContext("2d");

              canvas.style.position = "fixed";
              canvas.style.left = "0";
              canvas.style.top = "0";
              canvas.style.width = "100%";
              canvas.style.height = "100%";
              canvas.style.pointerEvents = "none";
              canvas.style.zIndex = "999999"; // above all
              document.body.appendChild(canvas);

              // IMPORTANT: canvas resize resets context styles (iOS issue) -> re-apply styles after resize.
              function applySnowStyle() {
                  ctx.fillStyle = "rgba(255,255,255,1)";
                  ctx.shadowColor = "rgba(243,241,241,0.9)";
                  ctx.shadowBlur = 8;
              }

              function resize() {
                  const dpr = window.devicePixelRatio || 1;
                  canvas.width = Math.floor(window.innerWidth * dpr);
                  canvas.height = Math.floor(window.innerHeight * dpr);
                  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
                  applySnowStyle(); // ✅ fixes “snow turns black after scroll/resize”
              }
              resize();

              // iOS Safari often fires resize while scrolling (address bar). This is why we must re-apply style.
              window.addEventListener("resize", resize);

              // --- Particles ---
              const COUNT = 220; // denser so it's easier to see
              const flakes = Array.from({ length: COUNT }, () => ({
                  x: Math.random() * window.innerWidth,
                  y: Math.random() * window.innerHeight,
                  r: 2 + Math.random() * 4,
                  vx: -0.4 + Math.random() * 0.8,
                  vy: 1.2 + Math.random() * 2.2,
                  wobble: Math.random() * Math.PI * 2,
              }));

              let running = true;

              function tick() {
                  if (!running) return;

                  applySnowStyle();

                  ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);

                  for (const f of flakes) {
                      f.wobble += 0.02;
                      f.x += f.vx + Math.sin(f.wobble) * 0.45;
                      f.y += f.vy;

                      // wrap
                      if (f.y > window.innerHeight + 12) {
                          f.y = -12;
                          f.x = Math.random() * window.innerWidth;
                      }
                      if (f.x > window.innerWidth + 12) f.x = -12;
                      if (f.x < -12) f.x = window.innerWidth + 12;

                      ctx.beginPath();
                      ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2);
                      ctx.fill();
                  }

                  requestAnimationFrame(tick);
              }
              tick();

              snow = {
                  stop() {
                      running = false;
                      window.removeEventListener("resize", resize);
                      canvas.remove();
                      snow = null;
                  }
              };
          }

          function syncHolidayMode() {
              const enabled = inWindowLocal(START, END);
              applySnowcap(enabled);

              if (enabled) {
                  startSnowfall();
              } else if (snow) {
                  snow.stop();
              }
          }

          // Initial sync
          syncHolidayMode();

          // Optional: if the page stays open across midnight, update within a minute.
          setInterval(syncHolidayMode, 60_000);
      })();
  </script>
</body>
</html>

